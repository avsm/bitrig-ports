--- gcc/tree-nested.c.orig	Sat Sep  1 17:28:30 2007
+++ gcc/tree-nested.c	Fri Jan 24 23:41:58 2014
@@ -749,7 +749,7 @@ check_for_nested_with_variably_modified (tree fndecl, 
   for (cgn = cgn->nested; cgn ; cgn = cgn->next_nested)
     {
       for (arg = DECL_ARGUMENTS (cgn->decl); arg; arg = TREE_CHAIN (arg))
-	if (variably_modified_type_p (TREE_TYPE (arg), 0), orig_fndecl)
+	if (variably_modified_type_p (TREE_TYPE (arg), orig_fndecl))
 	  return true;
 
       if (check_for_nested_with_variably_modified (cgn->decl, orig_fndecl))
@@ -1621,6 +1621,15 @@ convert_tramp_reference (tree *tp, int *walk_subtrees,
       if (DECL_NO_STATIC_CHAIN (decl))
 	break;
 
+      if (!flag_trampolines) 
+        {
+      	error ("trampoline code generation is not allowed without -ftrampolines");
+	return NULL_TREE;
+        }
+      if (warn_trampolines) 
+        {
+      	warning(0, "local function address taken needing trampoline generation");
+        }
       /* Lookup the immediate parent of the callee, as that's where
 	 we need to insert the trampoline.  */
       for (i = info; i->context != target_context; i = i->outer)
